# 位运算

## 为什么需要位运算

因为机器里的数字表示方式和存储方式都是二进制

[十进制与二进制的转换](https://zh.wikihow.com/从十进制转换为二进制)

## 位运算符

- 左移 <<
- 右移 >>
- 按位或 | (两个二进制数，只要有一个二进制位是1，结果就是1)
- 按位与 & (两个二进制数，只要有一个二进制位是0，结果就是0)
- 按位取反 ～ (一个二进制数，每一位取反操作)
- 按位异或 ^ (两个二进制数，相同的二进制位为0，相异的为1)
    - x ^ 0 = x
    - x ^ 1s = ~x  // 1s = ~0 即全为1
    - x ^ (~x) = 1s
    - x ^ x = 0

## 算数移位与逻辑移位

1. 将 x 最右边的 n 位清零： x & (~0 << n)
2. 获取 x 的第 n 位值： (x >> n) & 1
3. 获取 x 的第 n 位的幂值： x & (1 << n)
4. 仅将第 n 位置为 1： x | (1 << n)
5. 仅将第 n 位置位 0: x & (~(1 << n))
6. 将 x 最高位至第 n 位(含) 清零： x & ((1 << n) - 1)

## 位运算要点

1. 判断奇偶：
    - x % 2 == 1 位运算可转换为 (x & 1) == 1
    - x % 2 == 0 位运算可转换为 (x & 0) == 0
2. x / 2: 除以2 的操作可用位运算 x >> 1 即x向右移一位把二进制位最后一位清空，然后右挪，相当于 x ÷ 2
3. x = x & (x - 1) 清零最低位的 1
4. x & -x 得到最低位的 1
5. x & ~x = 0 